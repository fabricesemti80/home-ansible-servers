version: '3'

tasks:
  list:
    desc: List all available ansible tasks
    cmds:
    - ansible-playbook nas.yml --list-tasks

  deploy:
    desc: Deploy full media server configuration
    cmds:
    - ansible-playbook nas.yml -b -K

  check:
    desc: Dry-run full deployment with diff
    cmds:
    - ansible-playbook nas.yml -b -K --check --diff

  deploy:hus:
    desc: Deploy to hus host group
    cmds:
    - ansible-playbook nas.yml -b -K -l hus

  check:hus:
    desc: Dry-run hus deployment with diff
    cmds:
    - ansible-playbook nas.yml -b -K -l hus --check --diff

  deploy:hms:
    desc: Deploy to hms host group
    cmds:
    - ansible-playbook nas.yml -b -K -l hms

  check:hms:
    desc: Dry-run hms deployment with diff
    cmds:
    - ansible-playbook nas.yml -b -K -l hms --check --diff

  deploy:tags:
    desc: Deploy specific tagged tasks
    interactive: true
    cmds:
    - |
      echo "Available tags based on codebase:"
      echo "- download-tools (bazarr, deluge, get_iplayer, lidarr, mylar, ombi, prowlarr, sabnzbd, youtubedlmaterial)"
      echo "- system-tools (duplicacy, duplicati)"
      echo "- home-automation (esphome)"
      read -p "Enter tags (comma-separated): " tags
      ansible-playbook nas.yml -b -K --tags="$tags"

  check:tags:
    desc: Dry-run tagged tasks with diff
    interactive: true
    cmds:
    - |
      echo "Available tags based on codebase:"
      echo "- download-tools (bazarr, deluge, get_iplayer, lidarr, mylar, ombi, prowlarr, sabnzbd, youtubedlmaterial)"
      echo "- system-tools (duplicacy, duplicati)"
      echo "- home-automation (esphome)"
      read -p "Enter tags (comma-separated): " tags
      ansible-playbook nas.yml -b -K --tags="$tags" --check --diff

  default:
    cmds:
    - task --list
